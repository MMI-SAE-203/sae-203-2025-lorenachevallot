---
import Logo from "../assets/svg/logo.svg";
import Rechercher from "../assets/svg/element_loupe.svg";

const props = Astro.props;
const hero = props.hero;
---

<header
    class="relative w-full min-h-[30dvh] p-0 bg-cover bg-center text-white bg-black z-10 flex flex-col justify-center items-center"
>
    <div class="absolute inset-0"></div>

    <div
        class="header top-0 left-0 w-full flex items-center justify-between px-6 py-4 z-20 fixed"
    >
        <a href="/"><img src={Logo.src} alt="logo Cinemagny" class="w-12" /></a>
        <div class="flex gap-4 items-center">
            <button class="p-2">
                <img src={Rechercher.src} alt="search" class="w-8 h-8 invert" />
            </button>
            <button
                class="relative z-20 flex h-6 w-8 flex-col justify-between *:h-[2px] *:w-full *:bg-white"
                id="menu-btn"
                aria-label="Menu"
                aria-controls="menu"
                aria-expanded="false"
            >
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </div>

    <nav
        class="visible fixed inset-0 text-2xl text-black opacity-100 transition-all duration-300 ease-in-out aria-hidden:invisible aria-hidden:opacity-0 bg-white z-10"
        id="menu"
        aria-hidden="true"
    >
        <ul class="flex flex-col space-y-2 mt-[25dvh] px-8">
            <li>
                <a href="/programmation" class="hover:text-primary"
                    >Programmation</a
                >
            </li>
            <li>
                <a href="/billetterie" class="hover:text-primary">Billetterie</a
                >
            </li>
            <li><a href="/" class="hover:text-primary">Infos pratiques</a></li>
            <li><a href="/" class="hover:text-primary">Invités</a></li>
            <li><a href="/" class="hover:text-primary">Activités</a></li>
            <li>
                <a href="/ecologie" class="hover:text-primary"
                    >Écoresponsabilité</a
                >
            </li>
            <li><a href="/a-propos" class="hover:text-primary">À Propos</a></li>
            <li><a href="/contact" class="hover:text-primary">Contact</a></li>
        </ul>
    </nav>
    <div
        class="absolute inset-0 flex flex-col items-center justify-center text-center px-6 mt-12"
    >
        <h1 class="font-sans font-light text-5xl">
            {hero.title}
        </h1>
        <h2 class="font-sans text-lg md:text-2xl mt-2">
            {hero.subtitle}
        </h2>
        {
            hero.button && (
                <button class="border border-white px-6 py-3 mt-6 text-xs hover:bg-white hover:text-black transition z-10">
                    {hero.button}
                </button>
            )
        }
    </div>

    {
        hero.imgHero && (
            <div class="inset-0 -z-10 bg-black/50 m-0 p-0 h-screen w-screen">
                <img
                    src={hero.imgHero}
                    alt="hero background"
                    class="mix-blend-color object-cover h-full w-full"
                />
            </div>
        )
    }
</header>

<script>
    const toggle = document.querySelector("#menu-btn");
    const nav = document.querySelector("#menu");
    const page = document.body;
    const header = document.querySelector(".header");

    if (toggle && nav) {
        toggle.addEventListener("click", () => {
            const isOpen = toggle.ariaExpanded === "true";
            const isClosed = !isOpen;

            toggle.ariaExpanded = String(isClosed);
            nav.ariaHidden = String(isOpen);
            page.classList.toggle("noscroll", isClosed);
            header?.classList.toggle("black", isClosed);
        });
    }
</script>
